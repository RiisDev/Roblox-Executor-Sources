#pragma once
#include <Windows.h>
#include <string>
#include <iostream>
#include <vector>
#include <fstream>
#include <istream>
#include <iterator>
#include <sstream>
#include "Offsets.h"

static std::vector<std::string> SplitArguments(std::string string)
{
	std::vector<std::string> elements;
	std::stringstream start(string);
	std::istream_iterator<std::string> begin(start);
	std::istream_iterator<std::string> end;
	std::vector<std::string> vectorStrings(begin, end);
	return vectorStrings;
}

/*This part was made all by infinity lol*/

void LuaCExecute(std::string input) {
	try {
		std::vector<std::string> args = SplitArguments(input);

		if (args.at(0) == "getfield") {
			r_l_getfield(lua_State, stoi(args.at(1)), args.at(2).c_str());
		}

		else if (args.at(0) == "getglobal") {
			r_l_getglobal(lua_State, args.at(1).c_str());
		}

		else if (args.at(0) == "setfield") {
			r_l_setfield(lua_State, stoi(args.at(1)), args.at(2).c_str());
		}

		else if (args.at(0) == "pushvalue") {
			r_l_pushvalue(lua_State, stoi(args.at(1)));
		}

		else if (args.at(0) == "pushstring") {
			r_l_pushstring(lua_State, args.at(1).c_str());
		}

		else if (args.at(0) == "pushnumber") {
			r_l_pushnumber(lua_State, stoi(args.at(1)));
		}

		else if (args.at(0) == "pushboolean") {
			r_l_pushnumber(lua_State, stoi(args.at(1)));
		}

		else if (args.at(0) == "pcall") {
			r_l_pcall(lua_State, stoi(args.at(1)), stoi(args.at(2)), stoi(args.at(3)));
		}

		else if (args.at(0) == "emptystack") {
			r_l_settop(lua_State, 0);
		}
	}
	catch (...) {

	}
}